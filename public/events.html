<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Discover Events - FAM</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/chatbot.css">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <img src="logo.png" alt="FAM Logo" class="logo">
        <h1>FAM</h1>
      </div>
      <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="events.html" class="active">Events</a></li>
        <li><a href="communities.html">Communities</a></li>
        <li id="profileLink" style="display: none;"><a href="profile.html">My Profile</a></li>
        <li id="authLinks">
          <a href="login.html">Login</a>
          <a href="register.html">Sign Up</a>
        </li>
        <li id="userLinks" style="display: none;">
          <a href="create-event.html">Create Event</a>
          <a href="#" id="logoutBtn">Logout</a>
        </li>
      </ul>
    </div>
  </nav>

  <section class="page-header">
      <div class="container">
        <h2>Discover Events</h2>
        <p>Find events that match your interests</p>
      </div>
    </section>

    <section class="content-section">
      <div class="container">
        <div class="search-bar">
          <input type="text" id="searchInput" placeholder="Search events...">
          <select id="categoryFilter">
            <option value="">All Categories</option>
            <option value="Technology">Technology</option>
            <option value="Sports">Sports</option>
            <option value="Arts">Arts & Culture</option>
            <option value="Business">Business</option>
            <option value="Food">Food & Drink</option>
            <option value="Health">Health & Wellness</option>
            <option value="Education">Education</option>
            <option value="Social">Social</option>
          </select>
          <select id="dateFilter">
            <option value="all">All Dates</option>
            <option value="today">Today</option>
            <option value="this-week">This Week</option>
            <option value="this-month">This Month</option>
          </select>
          <button class="btn btn-primary" id="searchBtn">Search</button>
        </div>

        <div class="view-controls">
          <button class="btn btn-primary" id="listViewBtn" onclick="switchView('list')">List View</button>
          <button class="btn btn-outline" id="mapViewBtn" onclick="switchView('map')">Map View</button>
        </div>

        <div id="listView">
          <div id="eventsContainer" class="events-grid">
            <div class="loading">Loading events...</div>
          </div>
        </div>

        <div id="mapView" style="display: none;">
          <div id="map"></div>
        </div>
      </div>
    </section>

    <!-- Booking Confirmation Modal -->
    <div id="bookingModal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeBookingModal()">&times;</span>
        <h2>Confirm Your Registration</h2>
        <div id="modalEventDetails" class="modal-event-details"></div>
        <div id="modalUserDetails" class="modal-user-details"></div>
        <div class="modal-actions">
          <button class="btn btn-primary" onclick="confirmBooking()">Confirm & Register</button>
          <button class="btn btn-outline" onclick="closeBookingModal()">Cancel</button>
        </div>
      </div>
    </div>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 FAM. All rights reserved.</p>
    </div>
  </footer>

  <script src="js/auth.js?v=1770733346"></script>
  <script src="js/events.js?v=1770733347"></script>
  <script>
    // Handle Google Maps load error gracefully
    window.gm_authFailure = function() {
      console.log('Google Maps authentication failed');
      if (typeof showMapSetupInstructions === 'function') {
        showMapSetupInstructions();
      }
    };
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBcR0uANFUE1SvpR1tvrXvALPsP-BmSAdQ&callback=initMap&libraries=geometry"
    onerror="console.log('Failed to load Google Maps')">
  </script>
  <script src="js/chatbot.js"></script>
</body>
</html>
